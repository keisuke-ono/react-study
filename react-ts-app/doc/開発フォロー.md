# React TypeScript プロジェクト開発ガイド

## 目次
1. [開発環境の基本設定](#開発環境の基本設定)
2. [追加設定項目](#追加設定項目)
3. [各設定の詳細説明](#各設定の詳細説明)
4. [開発開始前のチェックリスト](#開発開始前のチェックリスト)

## 開発環境の基本設定

### 現状導入済みの項目

1. **基本環境**
   - TypeScript + React
   - Vite（ビルドツール）
   - pnpm（パッケージマネージャー）

2. **コード品質管理**
   - ESLint
   - Prettier
   - TSConfig設定

## 追加設定項目

### 1. テスト環境のセットアップ

```bash
pnpm add -D vitest @testing-library/react @testing-library/jest-dom
```

vite.config.tsの設定：
```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  test: {
    environment: 'jsdom',
    globals: true,
  }
})
```

### 2. Git Hooks設定　　まだやってない

```bash
pnpm add -D husky lint-staged
```

package.jsonの設定：
```json
{
  "scripts": {
    "prepare": "husky install"
  },
  "lint-staged": {
    "*.{ts,tsx}": [
      "eslint --fix",
      "prettier --write"
    ]
  }
}
```

### 3. VSCode設定

.vscode/settings.jsonを作成：
```json
{
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "typescript.tsdk": "node_modules/typescript/lib"
}
```

### 4. 環境変数設定

開発環境用（.env.development）：
```plaintext
VITE_API_URL=http://localhost:3000
```

本番環境用（.env.production）：
```plaintext
VITE_API_URL=https://api.example.com
```

### 5. 推奨ディレクトリ構造 
src/
├── assets/ # 画像やフォントなど
├── components/ # 共通コンポーネント
├── features/ # 機能ごとのコンポーネント
├── hooks/ # カスタムフック
├── types/ # 型定義
├── utils/ # ユーティリティ関数
└── styles/ # グローバルスタイル



## 各設定の詳細説明

### テスト環境（Vitest + Testing Library）

目的：
- コードが期待通りに動作することを確認
- バグの早期発見
- リファクタリングの安全性確保

テスト例：
```typescript
import { render, screen } from '@testing-library/react'
import { Button } from './Button'

test('ボタンが正しく表示される', () => {
  render(<Button>クリック</Button>)
  const button = screen.getByText('クリック')
  expect(button).toBeInTheDocument()
})
```

### Git Hooks（husky + lint-staged）

目的：
- コミット前の自動チェック
- コード品質の維持
- チーム開発での一貫性確保

動作の流れ：
1. コードの変更をコミット
2. 自動的にリンターとフォーマッターが実行
3. 問題があれば修正を促す

### エディタ設定（VSCode）

目的：
- 自動コード整形
- チーム全体での統一された開発環境
- 開発効率の向上

### 環境変数

目的：
- 環境ごとの設定値の管理
- セキュリティ情報の保護
- 柔軟な環境切り替え

使用例：
```typescript
const apiUrl = import.meta.env.VITE_API_URL
```

### エラーバウンダリ

目的：
- アプリケーションの安定性確保
- ユーザー体験の向上
- エラー情報の収集

実装例：
```typescript
class ErrorBoundary extends Component<Props, State> {
  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    console.error('エラー:', error, errorInfo);
  }

  public render() {
    if (this.state.hasError) {
      return <h1>問題が発生しました。</h1>;
    }
    return this.props.children;
  }
}
```

## 開発開始前のチェックリスト

- [ ] 開発サーバーが正常に起動するか確認（`pnpm dev`）
- [ ] リンターが正常に動作するか確認（`pnpm lint`）
- [ ] 型チェックが正常に動作するか確認（`pnpm type-check`）
- [ ] Git Hooksが正しく設定されているか確認
- [ ] VSCodeの拡張機能が正しく動作するか確認
- [ ] 環境変数が正しく設定されているか確認

## 注意事項

- これらの設定は一度に導入する必要はありません
- プロジェクトの規模や要件に応じて必要な項目を選択してください
- チームでの開発の場合は、メンバーと相談の上で導入を決めてください

## 参考リンク

- [Vite公式ドキュメント](https://vitejs.dev/)
- [React Testing Library公式ドキュメント](https://testing-library.com/docs/react-testing-library/intro/)
- [ESLint公式ドキュメント](https://eslint.org/)
- [Prettier公式ドキュメント](https://prettier.io/)